library(stringr)
under2012=read.csv("../Data/Raw_data/under2012.csv",stringsAsFactors=F)
names(under2012)
under2012$Genera=str_trim(under2012$Genera) #remove spaces before and after sp.names.
under2012$species=str_trim(under2012$species)
under2012[under2012$species=="sp",]
under2012[under2012$species=="sp",]$species="spp" # change sp to spp
under2012[under2012$species=="sp",]
under2012$sp=paste(under2012$Genera,under2012$species) # combine genus and sp
sort(unique(under2012$sp))
under2012[under2012$sp=="Acerr rubrum",]$sp="Acer rubrum"
under2012$sp
under2012[under2012$sp=="Acerr rubrum",]
under2012=read.csv("../Data/Raw_data/under2012.csv",stringsAsFactors=F)
names(under2012)
under2012$Genera=str_trim(under2012$Genera) #remove spaces before and after sp.names.
under2012$species=str_trim(under2012$species)
under2012[under2012$species=="sp",]$species="spp" # change sp to spp
under2012$sp=paste(under2012$Genera,under2012$species) # combine genus and sp
sort(unique(under2012$sp))
under2012[under2012$sp=="Acerr rubrum",]
under2012$sp=="Acerr rubrum"
sort(unique(under2012$sp))
under2012[under2012$sp=="Accer rubrum",]
under2012[under2012$sp=="Acrtostaphylos uva-ursi",]
under2012[under2012$sp=="Carex pennsylvanica",]
under2012[under2012$sp=="Accer rubrum",]$sp="Acer rubrum"
under2012[under2012$sp=="Acrtostaphylos uva-ursi",]$sp="Arctostaphylos uva-ursi"
under2012[under2012$sp=="Carex pennsylvanica",]$sp="Carex pensylvanica"
View(under2012)
names(under2012)
under2012 = under2012[c("Plot", "Transect", "Quadrat", "sp")]
View(under2012)
# read data into R
under2012=read.csv("../Data/Raw_data/under2012.csv",stringsAsFactors=F)
# data clean: you should clean your data with scripts instead of doing it
# in Excel. By using scripts, you recorded all of your history about data
# clean. You should also make comments about why you changed your data.
names(under2012)
under2012$Genera=str_trim(under2012$Genera) #remove spaces before and after sp.names.
under2012$species=str_trim(under2012$species)
under2012[under2012$species=="sp",]$species="spp" # change sp to spp
under2012$sp=paste(under2012$Genera,under2012$species) # combine genus and sp
sort(unique(under2012$sp))
## correct sp names' typo and errors
under2012[under2012$sp=="Accer rubrum",]$sp="Acer rubrum"
under2012[under2012$sp=="Acrtostaphylos uva-ursi",]$sp="Arctostaphylos uva-ursi"
under2012[under2012$sp=="Carex pennsylvanica",]$sp="Carex pensylvanica"
# remove columns we do not need
under2012 = under2012[c("Plot", "Transect", "Quadrat", "sp", "Count")]
View(under2012)
under2012$Count[is.na(under2012$Count)] = 1 # replace NA with 1.
View(under2012)
View(under2012)
library(plyr)
library(dplyr, quietly = T)
library(dplyr, warn.conflicts = F)
library(plyr)
library(dplyr, warn.conflicts = F)
under2012 %>%
group_by(Plot) %>%
n_distinct(sp)
names(under2012)
under2012 %>%
group_by(Plot)
under2012 %>%
group_by(Plot) %>%
length(unique(sp))
str(under2012)
under2012 %>%
group_by(Plot) %>%
length(unique(.$sp))
under2012 %>%
group_by(Plot) %>%
length(unique(sp))
library(stringr)
library(plyr)
library(dplyr)
under2012 %>%
group_by(Plot) %>%
length(unique(sp))
under2012$sp
under2012 %>%
group_by(Plot) %>%
length(unique(sp))
library(stringr)
library(plyr)
library(dplyr)
# read data into R
under2012=read.csv("../Data/Raw_data/under2012.csv",stringsAsFactors=F)
# data clean: you should clean your data with scripts instead of doing it
# in Excel. By using scripts, you recorded all of your history about data
# clean. You should also make comments about why you changed your data.
names(under2012)
under2012$Genera=str_trim(under2012$Genera) #remove spaces before and after sp.names.
under2012$species=str_trim(under2012$species)
under2012[under2012$species=="sp",]$species="spp" # change sp to spp
under2012$sp=paste(under2012$Genera,under2012$species) # combine genus and sp
sort(unique(under2012$sp))
## correct sp names' typo and errors
under2012[under2012$sp=="Accer rubrum",]$sp="Acer rubrum"
under2012[under2012$sp=="Acrtostaphylos uva-ursi",]$sp="Arctostaphylos uva-ursi"
under2012[under2012$sp=="Carex pennsylvanica",]$sp="Carex pensylvanica"
# remove columns we do not need
under2012 = under2012[c("Plot", "Transect", "Quadrat", "sp", "Count")]
under2012$Count[is.na(under2012$Count)] = 1 # replace NA with 1.
under2012 %>%
group_by(Plot) %>%
length(unique(sp))
under2012 %>%
group_by(Plot) %>%
length(unique("sp"))
under2012 %>%
group_by(Plot) %>%
length("sp")
under2012 %>%
group_by(Plot) %>%
length(sp)
ddply(under2012, .(Plot), summarize, sprich = length(sp))
ddply(under2012, .(Plot), summarize, sprich = length(unique(sp)))
under2012 %>%
group_by(Plot) %>%
length(sp)
sprich = ddply(under2012, .(Plot), summarize, sprich = length(unique(sp)))
meansprich = mean(sprich$sprich)
meansprich
envi = read.csv("../Data/Raw_data/envi.csv")
View(envi)
library(tidyr)
gather(data = envi, key = envi, value = value)
gather(data = envi, key = envi, value = value, -site)
gather(data = envi, key = envi, value = value, -site)
gather(data = envi, key = envi, value = value, -Site)
library(ggplot2)
sprich
envi = read.csv("../Data/Raw_data/envi.csv")
gather(data = envi, key = envi, value = value, -Plot) # wide table to long table
source('~/github/workflow_demo/R/rcode.R', echo=TRUE)
sprich
envi.sprich = merge(envi.long, sprich, by = "Plot")
envi.long = gather(data = envi, key = envi, value = value, -Plot)
envi.sprich = merge(envi.long, sprich, by = "Plot")
View(envi.sprich)
ggplot(data = envi.sprich, aes(x = value, y = sprich)) +
geom_point() + geom_smooth(method = "lm") +
facet_wrap(~envi)
ggplot(data = envi.sprich, aes(x = value, y = sprich)) +
geom_point() + geom_smooth(method = "lm") +
facet_wrap(~envi, scales = "free")
pl = ggplot(data = envi.sprich, aes(x = value, y = sprich)) +
geom_point() + geom_smooth(method = "lm") +
facet_wrap(~envi, scales = "free") + theme_bw()
pl
source('~/.active-rstudio-document', echo=TRUE)
pl = ggplot(data = envi.sprich, aes(x = value, y = sprich)) +
geom_point() + geom_smooth(method = "lm") +
facet_wrap(~envi, scales = "free_x") + theme_bw()
pl
ggsave(filename = "../Figs/plot.pdf", pl, width = 6, height = 6, units = "in")
source('~/.active-rstudio-document', echo=TRUE)
ggsave(filename = "../Figs/plot.pdf", pl, width = 6, height = 6, units = "in")
meansprich
library(knitr)
kable(sprich, markdown)
kable(sprich, format = "markdown")
library(knit2)
library(knitr)
meansprich
